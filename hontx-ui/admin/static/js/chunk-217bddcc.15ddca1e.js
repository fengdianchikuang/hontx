(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-217bddcc"],{"0a5a":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("b775");function l(e){return Object(n["a"])({url:"/region/address/list",method:"get",params:e})}},"74ad":function(e,t,a){"use strict";a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"f",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c}));var n=a("b775");function l(e){return Object(n["a"])({url:"/rate/rate/list",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/rate/rate/"+e,method:"get"})}function i(e){return Object(n["a"])({url:"/rate/rate",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/rate/rate",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/rate/rate/"+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/rate/rate/export",method:"get",params:e})}},"948d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"form",attrs:{model:e.form,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"保险公司",prop:"channelId"}},[a("el-select",{attrs:{placeholder:"请选择保险公司",clearable:"",size:"small"},model:{value:e.form.channelId,callback:function(t){e.$set(e.form,"channelId",t)},expression:"form.channelId"}},e._l(e.channelIdOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.key}})})),1)],1),a("el-form-item",{attrs:{label:"起止日期",prop:"effectDate"}},[a("el-date-picker",{attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"起始日期"},model:{value:e.form.startDate,callback:function(t){e.$set(e.form,"startDate",t)},expression:"form.startDate"}})],1),a("el-form-item",{attrs:{label:"",prop:"iCreateTime"}},[a("el-date-picker",{attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"终止日期"},model:{value:e.form.endDate,callback:function(t){e.$set(e.form,"endDate",t)},expression:"form.endDate"}})],1),a("el-form-item",{attrs:{label:"所属性质",prop:"belongType"}},[a("el-select",{attrs:{placeholder:"请选择用车性质",clearable:"",size:"small"},model:{value:e.form.belongType,callback:function(t){e.$set(e.form,"belongType",t)},expression:"form.belongType"}},[a("el-option",{key:"个人用车",attrs:{label:"个人用车",value:"00"}}),a("el-option",{key:"企业用车",attrs:{label:"企业用车",value:"01"}}),a("el-option",{key:"机关团体用车",attrs:{label:"机关团体用车",value:"02"}})],1)],1),a("el-form-item",{attrs:{label:"省份",prop:"areaCodes"}},[a("el-select",{attrs:{placeholder:"请选择省份",clearable:"",size:"small"},on:{change:function(t){return e.changeAreaCode(t)}},model:{value:e.queryParams.areaCodes,callback:function(t){e.$set(e.queryParams,"areaCodes",t)},expression:"queryParams.areaCodes"}},e._l(e.areaCodeOption,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{attrs:{label:"城市",prop:"areaCode"}},[a("el-select",{attrs:{placeholder:"请选择城市",clearable:"",size:"small"},model:{value:e.form.areaCode,callback:function(t){e.$set(e.form,"areaCode",t)},expression:"form.areaCode"}},e._l(e.cityCodeOption,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.code}})})),1)],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["company:list:add"],expression:"['company:list:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["company:list:edit"],expression:"['company:list:edit']"}],attrs:{type:"success",plain:"",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["company:list:remove"],expression:"['company:list:remove']"}],attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["company:list:export"],expression:"['company:list:export']"}],attrs:{type:"warning",plain:"",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("vxe-table",{attrs:{border:"",resizable:"","show-overflow":"","span-method":e.rowspanMethod,data:e.tableData,"edit-config":{trigger:"click",mode:"row",activeMethod:e.activeCellMethod}},on:{"edit-disabled":e.editDisabledEvent}},[a("vxe-table-column",{attrs:{field:"insrncType",title:"险种","edit-render":{name:"$select",options:e.insnrcTypeList}}}),a("vxe-table-column",{attrs:{field:"useType",title:"营运性质","edit-render":{name:"$select",options:e.useTypeList}}}),a("vxe-table-column",{attrs:{field:"vehicleType",title:"车辆类型","edit-render":{name:"$select",options:e.vehicleTypeList}}}),a("vxe-table-column",{attrs:{field:"totalRate",title:"总费率(%)","edit-render":{name:"input",attrs:{type:"text",placeholder:"请输入总费率"}}}}),a("vxe-table-column",{attrs:{field:"agentRate",title:"代理人费率","edit-render":{name:"input",attrs:{type:"text",placeholder:"请输入代理人"}}}}),a("vxe-table-column",{attrs:{field:"aRate",title:"A管理收益率(%)","edit-render":{name:"input",attrs:{type:"text",placeholder:"请输入A管理"}}}}),a("vxe-table-column",{attrs:{field:"bRate",title:"B管理收益率(%)","edit-render":{name:"input",attrs:{type:"text",placeholder:"请输入B管理"}}}})],1),a("br"),a("div",{staticStyle:{"align-content":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleReset}},[e._v("返回")])],1)],1)},l=[],r=a("ade3"),i=(a("caad"),a("159b"),a("d81d"),a("74ad")),o=a("0a5a"),s={name:"Rate",components:{},data:function(){var e;return e={tableData:[{insrncType:"01",useType:"00",vehicleType:"00",totalRate:"10",agentRate:"10",aRate:"0.5",bRate:"0.25"},{insrncType:"01",useType:"00",vehicleType:"01",totalRate:"10",agentRate:"10",aRate:"0.5",bRate:"0.25"},{useType:"01",insrncType:"01",vehicleType:"00",totalRate:"10",agentRate:"10",aRate:"0.5",bRate:"0.25"},{useType:"01",insrncType:"01",vehicleType:"01",totalRate:"10",agentRate:"10",aRate:"0.5",bRate:"0.25"},{useType:"00",insrncType:"00",belongType:"00",vehicleType:"00",totalRate:"10",agentRate:"10",aRate:"0.5",bRate:"0.25"},{useType:"00",insrncType:"00",belongType:"00",vehicleType:"01",totalRate:"10",agentRate:"10",aRate:"0.5",bRate:"0.25"},{useType:"01",insrncType:"00",belongType:"00",vehicleType:"00",totalRate:"10",agentRate:"10",aRate:"0.5",bRate:"0.25"},{useType:"01",insrncType:"00",belongType:"00",vehicleType:"01",totalRate:"10",agentRate:"10",aRate:"0.5",bRate:"0.25"}],channelIdOption:[{key:"00",value:"华安保险"},{key:"01",value:"中华保险"},{key:"02",value:"太平洋保险"},{key:"03",value:"平安"},{key:"04",value:"人保保险"},{key:"05",value:"诚泰保险"},{key:"06",value:"人寿保险"},{key:"07",value:"大地保险"},{key:"08",value:"长安保险"},{key:"09",value:"平安众安联合车险"},{key:"10",value:"国任财险"},{key:"11",value:"阳光财险"},{key:"12",value:"天安财险"},{key:"13",value:"太平财险"},{key:"14",value:"紫金财险"},{key:"15",value:"亚太财险"},{key:"16",value:"天平保险"},{key:"17",value:"永城保险"},{key:"18",value:"华泰保险"},{key:"19",value:"永安保险"},{key:"20",value:"大家保险"}],columns:[{field:"insrncType",title:"险种",width:"150",edit:"{name:'$select', options:insnrcTypeList}"},{field:"useTypeList",title:"营运性质",width:"150",edit:"{name:'$select', options:useTypeList}"},{field:"belongType",title:"所属性质",width:"150",edit:"{name:'$select', options:belongTypeList}"},{field:"vehicleType",title:"车辆类型",width:"150",edit:"{name:'$select', options:vehicleTypeList}"},{field:"totalRate",title:"总费率(%)",width:"150",edit:"{name:'$input', attrs:{type:text,placeholder:'请输入'}"},{field:"agentRate",title:"代理人收益率(%)",width:"150",edit:"{name:'$input', attrs:{type:text,placeholder:'请输入'}"},{field:"aRate",title:"A管理收益率(%)",width:"150",edit:"{name:'$input', attrs:{type:text,placeholder:'请输入'}"},{field:"bRate",title:"B管理收益率(%)",width:"150",edit:"{name:'$input', attrs:{type:text,placeholder:'请输入'}"}],insnrcCodeList:[{value:"0",label:"交强险"},{value:"1",label:"商业险"}],vehicleTypeList:[{value:"00",label:"新车"},{value:"01",label:"旧车"}],insnrcTypeList:[{value:"00",label:"商业险"},{value:"01",label:"交强险"}],useTypeList:[{value:"00",label:"非运营"},{value:"01",label:"运营"}],belongTypeList:[{value:"00",label:"家用"},{value:"01",label:"营用"}]},Object(r["a"])(e,"vehicleTypeList",[{value:"00",label:"新车"},{value:"01",label:"旧车"}]),Object(r["a"])(e,"loading",!0),Object(r["a"])(e,"ids",[]),Object(r["a"])(e,"single",!0),Object(r["a"])(e,"multiple",!0),Object(r["a"])(e,"showSearch",!0),Object(r["a"])(e,"total",0),Object(r["a"])(e,"rateList",[]),Object(r["a"])(e,"title",""),Object(r["a"])(e,"open",!1),Object(r["a"])(e,"queryParams",{channelId:null,pageNum:1,pageSize:10,belongType:null,effectDate:null,iCreateTime:null,areaCode:null}),Object(r["a"])(e,"areaCodeOption",[]),Object(r["a"])(e,"cityCodeOption",[]),Object(r["a"])(e,"form",{}),Object(r["a"])(e,"rules",{channelId:[{required:!0,message:"机构Id不能为空",trigger:"blur"}],effectDate:[{required:!0,message:"生效日期不能为空",trigger:"blur"}],iUpdateTime:[{required:!0,message:"修改日期不能为空",trigger:"blur"}],areaCode:[{required:!0,message:"区域码不能为空",trigger:"blur"}]}),e},created:function(){this.selectAreaCode(),this.getList()},methods:{rowspanMethod:function(e){var t=e.row,a=e._rowIndex,n=e.column,l=e.visibleData,r=["insrncType","useType","vehicleType"],i=t[n.property];if(i&&r.includes(n.property)){var o=l[a-1],s=l[a+1];if(o&&o[n.property]===i)return{rowspan:0,colspan:0};var c=1;while(s&&s[n.property]===i)s=l[++c+a];if(c>1)return{rowspan:c,colspan:1}}},handleSave:function(){var e=this;this.form.data=this.tableData,this.form.channelId?this.form.startDate?this.form.endDate?this.form.belongType?this.form.areaCode?this.$confirm("确认修改此费率, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])(e.form).then((function(t){e.msgSuccess("保存成功"),e.open=!1,e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消保存"})})):this.$message.error("生效区域不能为空"):this.$message.error("所属性质不能为空"):this.$message.error("生效结束日期不能为空"):this.$message.error("生效开始日期不能为空"):this.$message.error("保险公司不能为空")},selectAreaCode:function(){var e=this;this.form.channelId=this.$route.query.companyId;var t={type:1};Object(o["a"])(t).then((function(t){e.areaCodeOption=t.data}))},changeAreaCode:function(e){var t=this,a={type:null,parentcode:e};Object(o["a"])(a).then((function(e){t.cityCodeOption=e.data}))},handleChangeColumn:function(e){e.row,e.column},activeCellMethod:function(e){e.column;var t=e.columnIndex;if(3===t)this.tableData[t].vehicleType="01";else if(4===t&&(0===t||1===t||2===t))return!1;return!0},editDisabledEvent:function(e){e.row,e.column;this.$XModal.message({content:"禁止编辑",status:"error"})},getList:function(){var e=this;this.queryParams.channelId=this.$route.query.companyId,this.tableData.forEach((function(t){t.channelId=e.$route.query.companyId,console.log("设置保险公司",t.channelId)}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={iId:null,channelId:null,insrncType:null,belongType:null,useType:null,vehicleType:null,totalRate:null,agentRate:null,aRate:null,bRate:null,effectDate:null,iCreateTime:null,iUpdateTime:null,areaCode:null,orgId:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleReset:function(){this.$route.go(-1)},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.iId})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加费率设置"},handleUpdate:function(e){var t=this;this.reset();var a=e.iId||this.ids;Object(i["d"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改费率设置"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(null!=e.form.iId?Object(i["f"])(e.form).then((function(t){e.msgSuccess("修改成功"),e.open=!1,e.getList()})):Object(i["a"])(e.form).then((function(t){e.msgSuccess("新增成功"),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this,a=e.iId||this.ids;this.$confirm('是否确认删除费率设置编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(a)})).then((function(){t.getList(),t.msgSuccess("删除成功")}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有费率设置数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["c"])(t)})).then((function(t){e.download(t.msg)}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,l,!1,null,null,null);t["default"]=d.exports}}]);